<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="js/jquery-3.3.1.js"></script>
<script src="js/jquery.cookie.js"></script>
<script>
    var code=null;
    /**
     * 获取验证码
     * @param that
     */
    function getMsgNum(that) {
        var phonenum = $('#phone').val();
        console.log(phonenum);
        $.ajax({
            url:"http://localhost:8080/sms/smsXxs?phone="+phonenum, // 后台短信发送接口
            type: 'POST',
            dataType: 'json',
            async:false,
            contentType: "application/json",
            data: {phone:phonenum},
            success: function (json) {
                var all = eval(json);
                console.log(all.verifyCode);
                code=all.verifyCode;
            },
            error: function () {

            }
        });
    }
    function validate(that) {
        $('#error1').remove();
        $('#error2').remove();
        var pass=$('#pass').val();
        if(pass==code){
            alert("验证成功");
        }
        else{
            if($('#pass').val()=="")
            {
                $('#pass').after("<span style='color: red' id='error1'>您的密码为空请重新输入</span>");
                javascript:location.href='register.html';
            }
            else{
                $('#pass').after("<span style='color: red' id='error2'>密码错误</span>");
                javascript:location.href='register.html';
            }
            $('#pass').val("");
        }
    }
</script>
<body>
<div id="all">
    <input type="text" placeholder="请输入手机号" id="phone" value="15860303073"><br>
    <input type="password" placeholder="请输入密码" id="pass"><br>
    <input type="button"  id="verify_refresh" onclick="getMsgNum(this)" value="免费获取验证码"><br>
    <input type="button" id="validata" onclick="validate(this)" value="进行验证">
</div>
</body>
</html>