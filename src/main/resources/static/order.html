<!DOCTYPE html>
<html xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>

    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/order.css">
    <link rel="stylesheet" href="css/vueFenye.css">
    <script src="js/jquery-3.4.1.js"></script>
    <script src="js/vue.js"></script>
    <script>
        $(function () {
            var Messages = new Vue({
                el: ".main_list",
                data: {
                    houseInfo: [],
                },
            });
            $(function () {
                //插入数据
                $("input[type='submit']").click(function () {
                    $.ajax({
                        url: "/insert",
                        type: "post",
                        data: {
                            "message": $("[name='message']").val()
                        },
                        dataType: "json",
                        success: function (data) {
                            // alert(data);
                        }
                    })
                })
                MessagesPage();
            });
            //分页
            var FenYe = new Vue({
                el: "#fenye",
                data: {
                    // infos:[],//显示订单信息
                    page: 4,//总页数
                    pageNum: 1,//当前页数
                    fenYes: [],//从1排到总页数
                },
                methods: {
                    nextPage: function () {
                        if (FenYe.pageNum == FenYe.page) {
                            alert("当前是最后一页");
                        } else {
                            FenYe.pageNum++;
                            //    留白写方法名
                            MessagesPage();
                        }
                    },
                    perPage: function () {
                        if (FenYe.pageNum == 1) {
                            alert("当前为第一页");
                        } else {
                            FenYe.pageNum--;
                            //    留白写方法名
                            MessagesPage()
                        }
                    },
                    fenyePage: function (index) {
                        FenYe.pageNum = index + 1;
                        //    留白写方法名
                        MessagesPage();
                    },
                    fenYeJump: function () {
                        if (FenYe.pageNum > FenYe.page) {
                            alert("超过最大页数");
                            FenYe.pageNum = FenYe.page;
                        }
                        //    留白写方法名
                        MessagesPage();
                    }
                }
            })
            function MessagesPage() {
                //分页
                $.ajax({
                    url:"/page",
                    type: "post",
                    dataType: "json",
                    data:{pageNum:FenYe.pageNum,pageSize:1},
                    success:function (data) {
                        // FenYe.fenYes.splice(0, FenYe.fenYes.length);//清空分页数组
                        // var page = data.page;//得到总页数
                        // FenYe.page = page;
                        // for (var i=0;i<page;i++){
                        //     FenYe.fenYes.push({page:i+1})
                        // }
                        Messages.houseInfo.splice(0, Messages.houseInfo.length)//清空数组
                        var pageInfo = data.list;
                        for (var i = 0; i < pageInfo.length; i++) {
                            Messages.houseInfo.push({
                                houseName: pageInfo[i].houseName, housePrice: pageInfo[i].housePrice,
                                houseNumber: pageInfo[i].houseNumber, characterDes: pageInfo[i].characterDes,
                                houseArea: pageInfo[i].houseArea, liveNumber: pageInfo[i].liveNumber
                            });
                        }
                        // FenYe.fenYes.splice(0,FenYe.fenYes.length);

                    }
                })
                //商品信息
                $.ajax({
                    url: "/OrderMessage",
                    type: "post",
                    dataType: "json",
                    data: {"houseId": 1},
                    success: function (data) {
                        // alert(1)
                        // for (var i = 0; i < data.length; i++) {
                        //     Messages.houseInfo.splice(0, Messages.houseInfo.length)//清空数组
                        //     Messages.houseInfo.push({
                        //         houseName: data[i].houseName, housePrice: data[i].housePrice,
                        //         houseNumber: data[i].houseNumber, characterDes: data[i].characterDes,
                        //         houseArea: data[i].houseArea, liveNumber: data[i].liveNumber
                        //     })
                        // }
                    }
                })
            }

        })

    </script>
</head>
<body>
<div>
    <!--title-->
    <div class="header" id="top">
        <div class="mg_center">
            <div class="head_left">
                <a href="#">
                    <img src="http://www.xiaozhu.com/xz_web2/order/style/images/logo.png" height="43px" width="82px;">
                </a>
            </div>
            <div class="head_right">
                <div class="el_dropdown">
                    userName
                </div>
                <i>·</i>
                <div class="el_dropdown">
                    短租指南
                </div>
                <i>·</i>
                <div class="el_dropdown">
                    <img src="img/phoneicon.png" style="position:relative; top: 5px;" height="30px" width="30px;">
                    <span style="position: relative;bottom: 4px;">手机小猪</span>
                </div>
                <a href="#" target="_blank" class="publish">免费发布房间</a>
            </div>
        </div>
    </div>
    <!--main-->
    <div class="mg_center list">
        <div class="el_breadcrumb">
            <span class="el_breadcrumb__item">
                <span role="link" class="el_breadcrumb__inner">
                    <a href="#">首页</a>
                </span>
                <i style="color:rgb(189, 195, 199);"> -> </i>
            </span>
            <span class="el_breadcrumb__item">
                <span role="link" class="el_breadcrumb__inner">
                    <a href="#" style="color: #606266;">&nbsp;订单列表</a>
                </span>
            </span>
        </div>
        <section class="el-container">
            <aside class="el_aside" style="width: 170px; background-color: #F05B72">
                <div class="menu_web">
                    <ul class="el_menu">
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/share.png" class="font_22">
                                <span>分享优惠</span>
                            </a>
                        </li>
                        <li class="el-menu-item is-active" style="padding-left: 20px; color: rgb(44, 62, 80);">
                            <a href="#">
                                <img src="img/order.png" class="font_22">
                                <span>订单</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/review.png" class="font_22">
                                <span>点评</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/toStayin.png" class="font_22">
                                <span>常用入住人</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/vouchers.png" class="font_22">
                                <span>代金券</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/integral.png" class="font_22">
                                <span>积分</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/red-envelope.png" class="font_22">
                                <span>红包</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/Chat-Settings.png" class="font_22">
                                <span>聊天设置</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/Message.png" class="font_22">
                                <span>消息记录</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/notice.png" class="font_22">
                                <span>通知</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/personal-data.png" class="font_22">
                                <span>个人资料</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/collection.png" class="font_22">
                                <span>收藏</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/password.png" class="font_22">
                                <span>密码设置</span>
                            </a>
                        </li>
                        <li class="el-menu-item" style="padding-left: 20px;">
                            <a href="#">
                                <img src="img/cancellation-account.png" class="font_22">
                                <span>注销账号</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </aside>
        </section>
        <div class="el_main">
            <div class="el_tabs">
                <div class="el_right">
                    <div class="el_right_ing">
                        <a href="#" id="ing">进行中</a>
                    </div>
                    <div class="el_right_ing pink">
                        <a href="#" style="color: #F05B72;">已完成</a>
                    </div>
                </div>
                <div class="el_main_down">
                    <div class="pic">
                        <img id="pic_vue" src="http://www.xiaozhu.com/images/index_city/city_cd.jpg" height="280px"
                             width="340px">
                    </div>
                    <div>
                        <ul class="main_list" v-for="houseInfo in houseInfo">
                            <li><span>名称：{{houseInfo.houseName}}</span></li>
                            <li style="margin-top: 20px"><span>价格：￥{{houseInfo.housePrice}}</span></li>
                            <li style="margin-top: 20px"><span>数量：{{houseInfo.houseNumber}}间</span></li>
                            <li style="margin-top: 20px"><span>地址：{{houseInfo.characterDes}}</span></li>
                            <li style="margin-top: 20px"><span>占地面积：{{houseInfo.houseArea}}</span></li>
                            <!--                            <li style="margin-top: 20px"><span>居住人数：{{houseInfo.liveNubmer}}</span></li>-->
                        </ul>
                    </div>

                    <div class="star_review" v-for="score in score">
                        <div class="star_title">
                            <!--                            <h2>评分：{{score.score}}</h2>-->
                        </div>
                        <ul class="main_star" style="display: none;">
                            <li><h3>服务：⭐⭐⭐⭐</h3></li>
                            <li><h3>环境：⭐⭐⭐⭐</h3></li>
                            <li><h3>交通：⭐⭐⭐⭐</h3></li>
                            <li><h3>售后：⭐⭐⭐⭐</h3></li>
                        </ul>
                        <ul class="main_star"  style="display: none;">
                            <li><h3>服务：⭐⭐⭐</h3></li>
                            <li><h3>环境：⭐⭐⭐⭐⭐</h3></li>
                            <li><h3>交通：⭐⭐</h3></li>
                            <li><h3>售后：⭐⭐⭐</h3></li>
                        </ul>
                        <ul class="main_star"  style="display: none;">
                            <li><h3>服务：⭐⭐⭐⭐</h3></li>
                            <li><h3>环境：⭐⭐⭐</h3></li>
                            <li><h3>交通：⭐⭐⭐</h3></li>
                            <li><h3>售后：⭐⭐⭐⭐</h3></li>
                        </ul>
                        <ul class="main_star"  style="display: block;">
                            <li><h3>服务：⭐⭐⭐⭐</h3></li>
                            <li><h3>环境：⭐⭐⭐</h3></li>
                            <li><h3>交通：⭐⭐⭐</h3></li>
                            <li><h3>售后：⭐⭐</h3></li>
                        </ul>
                    </div>

                    <form>
                        <div class="pingLun">
                            <span><br><h3>请输入你的评论：</h3></span>
                            <div>
                                <textarea name="message" rows="8" cols="60" class="review_write"></textarea>
                            </div>
                            <div align="center" class="input_word">
                                <input type="submit" value="提交">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--    分页-->
    <div class="page" id="app-body">
        <div id="fenye">
            <button @click="perPage">上一页</button>
            <a v-for="fenYe in fenYe">{{fenYe}}</a>
            <button @click="nextPage">下一页</button>
            <span>共{{page}}页</span>
            <span>到第<input type="text" size="1px">页</span><input type="button" value="确定" @click="">
        </div>

    </div>
    <!--footer-->
    <div class="footer mg_center">
        <div class="foot">
            <ul class="bottom_line1">
                <li>
                    <a href="#" target="_blank">
                        <img src="http://www.xiaozhu.com/xz_web2/order/style/images/icon/b_icon01.png"
                             style="position: relative; right: 40px;top: 10px;">
                        <p style="position:relative;right: 40px; bottom:7px;">房客指南</p>
                    </a>
                </li>
                <li>
                    <a href="#" target="_blank">
                        <img src="http://www.xiaozhu.com/xz_web2/order/style/images/icon/b_icon01.png"
                             style="position: relative; right: 40px;top: 10px;">
                        <p style="position:relative;right: 40px; bottom:7px;">房东指南</p>
                    </a>
                </li>
            </ul>
            <div class="bottom_line2">
                <ul class="bottom_line2_main">
                    <li>关于我们</li>
                    <li>网站帮助</li>
                    <li>网站协议</li>
                </ul>
                <ul class="bottom_line2_main_2">
                    <li style="position: relative; bottom: 15px;">
                        <a href="#" target="_blank">关于小猪</a>
                    </li>
                    <li style="position: relative; bottom: 15px;">
                        <a href="#" target="_blank">帮助中心</a>
                    </li>
                    <li style="width: 314px; position: relative; left: 180px;bottom: 30px;">
                        <a href="#" target="_blank">服务协议</a>
                        <a href="#" target="_blank">房东规则</a>
                        <a href="#" target="_blank">房客规则</a>
                        <a href="#" target="_blank">房源上线标准</a>
                    </li>
                </ul>
                <ul class="bottom_line2_main_2" style="bottom: 30px;">
                    <li>
                        <a href="#" target="_blank">加入我们</a>
                    </li>
                    <li>
                        <a href="#" target="_blank">网站地图</a>
                    </li>
                    <li style="width: 314px; position: relative; left: 180px;bottom: 15px;">
                        <a href="#" target="_blank">隐私保护</a>
                        <a href="#" target="_blank">版权声明</a>
                        <a href="#" target="_blank">免责声明</a>
                        <a href="#" target="_blank">点评发布规则</a>
                    </li>
                </ul>
                <ul class="bottom_line2_main_2" style="top: 55px;">
                    <li>
                        <a target="_blank" href="#">联系我们</a>
                    </li>
                </ul>

            </div>
            <ul class="bottom_line3">
                <li>
                    <p>客服电话</p>
                    <p>400-812-3123</p>
                </li>
                <li>
                    <p>客服邮箱</p>
                    <p>service@xiaozhu.com</p>
                </li>
            </ul>
        </div>
    </div>
</div>
<!--悬浮栏-->
<div class="suspension">
    <ul class="suspension_lf">
        <li class="sus_list1" id="im_chat_btn" title="在线消息">
            <span style="position:relative"></span>
        </li>
        <li class="sus_list2" id="im_collection_btn" title="收藏">
            <span></span>
        </li>
        <li class="sus_list3" id="im_noticeAndNotification_btn" title="提醒和系统消息">
            <span></span>
        </li>
        <li class="sus_list4" id="im_feedBack_btn" title="反馈">
            <span></span>
        </li>
        <li class="sus_list5" id="im_qrCode_btn" title="二维码">
            <span></span>
        </li>
    </ul>

</div>
</body>
</html>